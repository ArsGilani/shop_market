<p id="notice"><%= notice %></p>

<h1>Категории товаров</h1>

<%= link_to 'Добавить новую', new_admin_category_path, class: 'btn btn-default' %>
<hr>
<div class="row">
  <div class="col-sm-4">
    <h4>Вложенность категорий</h2>
    <% @admin_categories.each do |category| %>
      <% if category.parent_category == nil %>
        <li>
          <%= link_to category.name, admin_category_path(category) %>
          <% if category.child_categories.any? %>
              <ul>
              <%= render 'categories', categories: category.child_categories %>
              </ul>
          <% end %>
        </li>
      <% end %>
    <% end %>

  </div>
  <div class="col-sm-8">
    
    <table class="table">
      <thead>
        <tr>
          <th>Название</th>
          <th>Описание</th>
          <th>Родитель</th>
          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>
        <% @admin_categories.each do |admin_category| %>
          <tr>
            <td><%= link_to admin_category.name, admin_category_path(admin_category) %></td>
            <td><%= admin_category.description %></td>
            <td><%= admin_category.parent_category.name if admin_category.parent_category %></td>
            <td><%= link_to 'Show', admin_category %></td>
            <td><%= link_to 'Edit', edit_admin_category_path(admin_category) %></td>
            <td><%= link_to 'Destroy', admin_category, method: :delete, data: { confirm: 'Are you sure?' } %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

  </div>
</div>








